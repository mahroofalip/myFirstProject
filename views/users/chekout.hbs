<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>



    <link href="//fonts.googleapis.com/css?family=Righteous" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300,300i,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i" rel="stylesheet">

    {{!-- GOOGLE FOUNT --}}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    {{!-- Font Awesome --}}
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="/stylesheets/nav.css">i
    <link rel="stylesheet" href="/stylesheets/style.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    {{!--
    <script>winhdow.hihstory.forwahrd();</script> --}}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">

    <script defer type="text/javascript" charset="utf8"
        src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>


    {{!-- ajax cdn --}}


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>





</head>

<body>

    <!-- Header -->
    <div class="container-fluid sticky-top">

        <header class="row">





            <div class="col-12 bg-dark p-3">
                <div class="row align-item">
                    <div class="col-lg-auto text-center">
                      
                            <strong> <a class="text-white site-logo" style="text-decoration: none;"
                                    href="/">Electra</a></strong>
                           
                    </div>
                    <div class="col-lg-5 mx-auto mt-lg-0" style="font-family: 'Open Sans Condensed', sans-serif;">
                        <form action="/search" method="post">
                            <div class="form-group">
                                <div class="input-group">
                                    <input name="content" type="text" class="form-control border-dark"
                                        placeholder="Search..." required>
                                    <button type="submit" class="btn btn-warning">
                                        <span class="text-dark material-icons">
                                            search
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>



                    <div class="col-lg-auto text-center text-lg-left header-item-holder ">



                        <a href="/wishlist" class="header-item">
                            <i class="text-white far fa-heart me-2"></i>

                            <span style="position: relative; bottom: 10px; right: 20px;"
                                class="bg-danger badge badge-light" id="countWishlist"></span>

                        </a>

                        <a href="/cart" class="header-item">
                            <i class="far fa-shopping-bag me-2 text-white"></i>



                            <span style="position: relative; bottom: 10px; right: 20px;"
                                class=" bg-danger badge badge-light" id="countCart"></span>


                        </a>
                        <a class="text-decoration-none dropdown-toggle text-white" href="#" role="button"
                            id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                            {{#if sessionData}}

                            {{sessionData.Name}}
                            {{else}}
                            Account
                            {{/if}}

                        </a>

                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            {{#unless sessionData}}

                            <li><a class="text-decoration-none dropdown-item" href="/login">Login</a></li>
                            {{/unless}}

                            {{#if sessionData}}
                            <li><a class="text-decoration-none dropdown-item" href="/logout">Logout</a></li>
                            <li><a class="text-decoration-none dropdown-item" href="/orders-page">My
                                    Order</a></li>
                            <li><a class="text-decoration-none dropdown-item" href="/profile">My profile</a>
                            </li>

                            {{/if}}
                        </ul>


                    </div>
                    {{!-- <div class="col-lg-auto dropdown">

                    </div> --}}
                </div>

            </div>

        </header>
    </div>


    <nav class="navbar navbar-expand-lg ftco_navbar  ftco-navbar-light" id="ftco-navbar">
        <div class="container-fluid">

            <button class="navbar-toggler text-white" type="button" data-toggle="collapse" data-target="#ftco-nav"
                aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="text-white fa fa-bars"></span> Categories
            </button>
            <div class="collapse navbar-collapse" id="ftco-nav">
                <ul class="navbar-nav m-auto">
                    {{#each Category}}
                    <li class="nav-item active"><a href="/getProductsByCategory/{{this.CategoryName}}"
                            class="nav-link">{{this.CategoryName}}</a></li>
                    {{/each}}
                </ul>
            </div>
        </div>
    </nav>
    <!--header -->

    <!-- main -->


    <main class="container">
        <div style="font-family: 'Open Sans Condensed', sans-serif;" class="py-2 text-center">

            <img class="d-block mx-auto mb-4"
                src="https://cdn2.vectorstock.com/i/1000x1000/36/31/online-basket-checkout-icon-vector-24873631.jpg"
                alt="" width="72" height="57">
            <h2 class="text-uppercase m-0" style="font-family:sans-serif;">Checkout</h2>


        </div>


        <form class="form" id="checkout-form">

            <input type="text" name="userId" value="{{user._id}}" hidden>


            <div class="row g-5">
                <div class="col-md-5 col-lg-4  order-last">

                    <ul style="font-family: sans-serif;" class="list-group mb-3">

                        <li class="list-group-item d-flex justify-content-between lh-sm">

                            <a style="display: inline;" class="text-muted m-1 text-uppercase">Price Details</a>
                            <a class="m-0 list-group-item d-inline text-danger border border-danger "
                                style=" font-size: 15px; text-decoration: none; float: right;" type="button"
                                data-toggle="modal" data-target="#modalCart">Coupons</a>



                        </li>


                        <li class="list-group-item d-flex justify-content-between lh-sm">

                            <table class="table">
                                <thead>

                                    <tr>

                                        <th scope="col">Product</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each eachItem}}
                                    <tr>

                                        <td>{{this.product.Name}}</td>
                                        <td class="text-center">{{this.quantity}}</td>
                                        <td>â‚¹ {{this.total}}</td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>

                        </li>


                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div>
                                <h6 class="my-0">Delivery Charge</h6>

                            </div>
                            <span class="text-success text-uppercase">Free</span>
                        </li>
                        <div class="list-group-item d-flex justify-content-center">

                            <span class=" mt-1 mb-1">

                                <div class="input-group">
                                    <div class="form-group">

                                        <label style="display: none; color: red" id="cpErr"></label>
                                        <div class="input-group">
                                            <input style="width: 15em;padding-bottom:5px ;padding-top: 5px;"
                                                id="coupon" type="text" class="form-control coupon" name="couponCode"
                                                value="" placeholder="Coupon code"> <span class="input-group-append">
                                                <button style="padding: bottom 5px;px ;padding-top: 5px;" id="btnaply"
                                                    onclick="applyCoupon();" type="button" class="btn border coupon">

                                                    <span style="display: block;" id="aplytex">Apply</span>

                                                    <span style="display: none;" id="aplysuccess">


                                                    </span>
                                                    <script
                                                        src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

                                                    {{!-- icon --}}

                                                </button> </span>
                                        </div>
                                    </div>
                                    {{!-- <input type="text" name="couponCode" value="" class="form-control"
                                        placeholder="Coupon Code">
                                    <button onclick="getInputValue();" type="button"
                                        class="btn btn-secondary">Apply</button> --}}
                                </div>

                            </span>
                        </div>

                        <li class="list-group-item d-flex justify-content-between lh-sm">
                            <div>
                                <h6 class="my-0">Items Price</h6>

                            </div>
                            <span class="text-dark text-uppercase">â‚¹ {{total.[0].total}}</span>
                        </li>

                        {{!-- <li id="discount" style="display: none;"
                            class="list-group-item d-flex justify-content-between lh-sm">
                            <div>
                                <h6 style="display: none;" id="discountH1" class="my-0">Discount</h6>

                            </div>
                            <span style="display: none;" id="disc" class="text-success text-uppercase">â‚¹ <span
                                    style="display: none;" id="dis"></span></span>
                        </li> --}}

                        <li id="lipayable" style="display: block;" class="list-group-item d-flex justify-content-between">
                            <span id="totalPayabletext"></span>
                            <strong style="color: green;" id="totalPayable"></strong>
                        </li>

                        <li class="list-group-item d-flex justify-content-between">
                            <span style="display: block;" id="saved" class="text-success fw-bold">
                            </span>

                        </li>

                        <li class="mt-3 list-group-item">


                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="PaymentMethod" value="COD"
                                    id="flexRadioDefault1" checked>
                                <label class="form-check-label" for="flexRadioDefault2">
                                    Cash On Delivery
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="PaymentMethod" value="Razorpay"
                                    id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault2">
                                    Razorpay
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="PaymentMethod" value="paypal"
                                    id="flexRadioDefault1">
                                <label class="form-check-label" for="flexRadioDefault2">
                                    PayPal
                                </label>
                            </div>
                        </li>


                    </ul>
                    {{#if address}}
                    <div class="d-grid">

                        <button type="submit" class="btn btn-dark">Proceed to Pay</button>
                    </div>
                    {{/if}}

                </div>
                <div class="col-md-7 col-lg-8">

                    {{#if address}}
                    <div class="contaner-fluid">
                        <div class="list-group-item">
                            <h4 class="mb-3 text-uppercase text-muted">Billing Details</h4>
                        </div>
                        {{#each address}}
                        <div class="list-group-item">

                            <div class="list-group-item-heading">
                                <div class="row radio">
                                    <div class="col-xs-3">

                                        <div>
                                            <input type="radio" name="addressForShip" id="optionShipp1"
                                                value="{{this.id}}" checked>
                                            <h6 class="ms-2 d-inline mb-1 text-secondary">{{this.Which}}</h6>
                                            <br>
                                            <span class="ms-4"> {{this.Name}} </span>
                                            <span class="ms-2">{{this.Mobile}} </span>

                                            <dl class="dl-small ms-4">

                                                <dd>{{this.Address}}, {{this.Locality}} <br>
                                                    {{this.City}} ,{{this.State}}
                                                    <strong>{{this.Pincode}}</strong>
                                                </dd>


                                            </dl>
                                        </div>

                                    </div>
                                    <div class="col-xs-5 ms-4">

                                        <a href="/edit-address-chekout/{{this.id}}"
                                            class="btn btn-sm btn-primary">Edit</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {{/each}}

                    </div>
                    {{else}}


                    <div class="contaner-fluid">
                        <div style="min-height: 84vh;" class="list-group-item">
                            <h6><span>hey {{user.Name}} !!! </h6>
                            <strong>Please Add An address <a href="/add-address-to-checkout">here</a></span></strong>
                        </div>
                    </div>


                    {{/if}}

                </div>

            </div>
        </form>
        </div>
    </main>


    <div class="container-fluid mt-4">
        <div class="col-12 align-self-end">
            <footer class="bg-dark text-center text-white">
                <!-- Grid container -->
                <div class="container p-4 pb-0">
                    <!-- Section: Social media -->
                    <section class="mb-4">
                        <!-- Facebook -->
                        <a class="btn  btn-floating m-1" href="#!" role="button"><img width="30px"
                                src="/snipp-cards/visa.png" alt=""></a>

                        <!-- Twitter -->
                        <a class="btn btn-floating m-1" href="#!" role="button"><img width="30px"
                                src="/snipp-cards/master.png" alt=""></a>

                        <!-- Google -->
                        <a class="btn  btn-floating m-1" href="#!" role="button"><img width="30px"
                                src="/snipp-cards/maestro.png" alt=""></a>

                        <!-- Instagram -->
                        <a class="btn  btn-floating m-1" href="#!" role="button"><img width="40px"
                                src="/snipp-cards/rupay.png" alt=""></a>


                        <!-- Linkedin -->
                        <a class="btn  btn-floating m-1" href="#!" role="button"><img width="40px"
                                src="/snipp-cards/PP_Acceptance_Marks_for_LogoCenter_266x142.png" alt=""></a>

                        <!-- Github -->
                        <a class="btn  btn-floating m-1" href="#!" role="button"><img width="30px"
                                src="/snipp-cards/download_GnGcaAb.jpg" alt=""></a>

                    </section>
                    <!-- Section: Social media -->
                </div>
                <!-- Grid container -->

                <!-- Copyright -->
                <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                    Â© 2022 Copyright:
                    <a class="text-white" style="text-decoration: none;"
                        href="https://mdbootstrap.com/">electra@gmail.com</a>
                </div>
                <!-- Copyright -->
            </footer>

        </div>



    </div>



    {{!-- razorpay cdn --}}








    <!-- Modal: copn -->
    <div style="margin-top: 100px;" class="modal fade" id="modalCart" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header">
                    <h6 class="modal-title text-success" id="myModalLabel">Avalabel Coupons</h6>
                    <button type="button" class="btn close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
                <!--Body-->
                <div class="modal-body">

                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Coupn Code</th>
                                <th>Discount%</th>

                            </tr>
                        </thead>
                        <tbody>
                            {{#each coupons}}
                            <tr>
                                <th scope="row" class="create_index"> </th>
                                <td> <span class="list-group-item text-danger">{{this.CouponCode}}</span></td>
                                <td>{{this.Discount}}% <span class="text-success"> Free</span></td>

                            </tr>
                            {{/each}}
                        </tbody>
                    </table>

                </div>
                <!--Footer-->
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>
    <!-- Modal: copn -->





  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/script.js"></script>
    <script src="/javascripts/bootsrap.min.js"></script>
    <script src="/javascripts/fetch.js"></script>
    <script src="/javascripts/chekout.js"></script>
    <script src="/javascripts/offer.js"></script>
    <script>
        (function ($) {

            "use strict";

            $('nav .dropdown').hover(function () {
                var $this = $(this);
                $this.addClass('show');
                $this.find('> a').attr('aria-expanded', true);
                $this.find('.dropdown-menu').addClass('show');
            }, function () {
                var $this = $(this);
                $this.removeClass('show');
                $this.find('> a').attr('aria-expanded', false);
                $this.find('.dropdown-menu').removeClass('show');
            });

        })(jQuery);

    </script>





    <script>

        var divs = document.querySelectorAll('.create_index');
        for (var i = 0; i < divs.length; ++i) {
            divs[i].innerHTML = i + 1;
        }

    </script>


</body>

</html>