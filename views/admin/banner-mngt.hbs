<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Dashto - Powerfull Admin Template">
    <meta name="keywords"
        content="admin dashboard, admin panel, dashboard, responsive dashboard, admin template, themeforest, dashboard template, css3, html5">
    <title>Dashto - Powerfull Admin Template</title>
    <link href="../assets/img/logo/favicon.png" rel="icon">
    <link rel="apple-touch-icon" href="../assets/img/logo/touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/img/logo/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/logo/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="167x167" href="../assets/img/logo/touch-icon-ipad-retina.png">
    <link href="../assets/css/vendor.css" rel="stylesheet" type="text/css">
    <link href="../assets/css/styles.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>   <![endif]-->


    <style>
        img {
            display: block;
            max-width: 100%;
        }

        .preview {
            overflow: hidden;
            width: 160px;
            height: 160px;
            margin: 10px;
            border: 1px solid red;
        }

        .modal-lg {
            max-width: 1000px !important;
        }

        .overlay {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            background-color: rgba(255, 255, 255, 0.5);
            overflow: hidden;
            height: 0;
            transition: .5s ease;
            width: 100%;
        }

        .image_area:hover .overlay {
            height: 50%;
            cursor: pointer;
        }

        .text {
            color: #333;
            font-size: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            text-align: center;
        }



        input[type="file"] {
            display: none;
        }

        .custom-file-upload {
            border: 1px solid #ccc;
            display: inline-block;
            padding: 6px 12px;
            cursor: pointer;
            background-color: rgb(211, 216, 212);
            color: rgb(14, 3, 172);
            border-radius: 10px;
            width: 250px;
            height: 40px;
        }
    </style>


    <link rel="stylesheet" href="https://unpkg.com/dropzone/dist/dropzone.css" />
    <link href="https://unpkg.com/cropperjs/dist/cropper.css" rel="stylesheet" />
    <script src="https://unpkg.com/dropzone"></script>
    <script src="https://unpkg.com/cropperjs"></script>

</head>

<body>
    {{!-- <div id="loader">
        <div id="loader-content">
            <div id="loader-circle"></div><span>Welcome to Electra</span>
        </div>
    </div> --}}
    <div id="wrapper">
        <header id="header"><a href="" id="hamburger"></a>

            <ul class="navbar ml-auto">

                <li> <a href="/admin/logout" class="btn btn-border btn-border-blue btn-sm">Logout</a></li>


                </li>
            </ul>
        </header>
        <aside id="sidebar"><a href="#" class="navbar-brand"><img
                    src="/electra-logo/079931129d47feba3c0c039789c13072.png" id="dark-logo" alt="logo"> <img
                    src="/electra-logo/079931129d47feba3c0c039789c13072.png" id="white-logo" alt="logo">
                <span>Electra</span></a>
            <div class="user-thumb dropdown"><a href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false"><img src="/electra-logo/118524174_1234758920204001_1331909952313311745_n.jpg"
                        alt="user"></a>

                <div class="user-desc"><a href="javascript:void(0);" class="user-name">Mahroof Ali</a></div>
            </div>
            <nav id="sidebar-nav">
                <ul>

                    <li><a href="/admin/gethome"><i class="icon ion-speedometer"></i> <span>Dashborad</span> <span
                                class="badge badge-pill bg-primary">Home</span></a>
                    </li>



                    <li><a href="#" class="sub-nav"><i class="fa fa-product-hunt" aria-hidden="true"></i>
                            <span>Product Management</span> </a>
                        <ul class="sub-nav-item">
                            <li><a href="/admin/product-list">View product</a></li>
                            <li><a href="#">Add Product</a></li>
                            <li><a href="/admin/category-mngt">Manage Category</a></li>
                            <li><a href="/admin/brandmngt">Brand Management</a></li>
                        </ul>

                    </li>

                    <li><a href="/admin/view-users"><i class="font-24 fa fa-user"></i>
                            <span>User Management</span> </a>

                    </li>
                    <li><a href="/admin/offer-mngt"><i class="fa fa-gift" aria-hidden="true"></i>
                            <span>Offer Management</span> </a>

                    </li>
                    <li><a href="/admin/order-mngt"><i class="fa fa-list" aria-hidden="true"></i>
                            <span>Order Management</span> </a>

                    </li>
                    <li class="active"><a href="/admin/banner-mngt"><i class="fa fa-flag" aria-hidden="true"></i>
                            <span>Banner Management</span> </a>

                    </li>
                    <li><a href="/admin/stockReport">


                            <i class="fa fa-book" aria-hidden="true"></i>
                            <span>Report</span> </a>

                    </li>

                </ul>
            </nav>
        </aside>
        <main id="page-wrapper">
            <div class="container-fluid">
                <div class="page-header d-flex">
                    <div class="heading page-header-item">
                        <h6 class="h6">Electra</h6>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Banner Management</a></li>

                            </ol>
                        </nav>
                    </div>
                </div>
                <div class="card card-shadow p-3">
                    <h6 class="h6 card-title">Add Product</h6>



                    <form action="/admin/add-banner" onsubmit="return validationaddressplace()" method="POST"
                        enctype="multipart/form-data" id="add-prod">









                        <div class="row">

                            <div class="col-3 form-field">


                                <label for="file-upload" class="custom-file-upload">
                                    <i class="fa fa-cloud-upload"></i> Add Banner
                                </label>
                                <input onchange="return fileValidation1()" name="image1" id="file-upload" type="file" />





                                <p style="margin-left: 10px; color: red;font-size: 16px;font-family: sans-serif;"
                                    id="bannerImage"></p>





                            </div>




                            <div class="col-sm-4 form-field">
                                {{!-- <label for="product" class="title-small c-blue">Banner Hedding</label> --}}
                                {{#if banner.[0].BannerHedding}}
                                <input id="inputhedding" name="BannerHedding" type="text" class="form-control"
                                    value="{{banner.[0].BannerHedding}}">
                                {{else}}
                                <input id="inputhedding" name="BannerHedding" type="text" class="form-control"
                                    placeholder="Enter Banner Title">
                                {{/if}}
                                <p style="color: red;font-size: 16px;font-family: sans-serif;" id="heddingErr">
                                </p>

                            </div>




                            <div class="col-sm-5 form-field">

                                {{!-- <label for="product" class="title-small c-blue">Banner Text</label> --}}
                                {{#if banner.[0].BannerText}}
                                <input id="bannerText" name="BannerText" value="{{banner.[0].BannerText}}" type="text"
                                    class="form-control">

                                {{else}}
                                <input id="bannerText" name="BannerText" value="" type="text" class="form-control"
                                    placeholder="Enter Banner Text">
                                {{/if}}
                                <p style="color: red;font-size: 16px;font-family: sans-serif;" id="bannTxt">
                                </p>

                            </div>




                        </div>


                        {{!-- prv --}}
                        <div style=" margin-top: 15px; margin-bottom: 20px;" class="row">





                            <div class="col-sm-12 borer">


                                <div style="display: flex; justify-content: center; margin-top: 30px;">
                                    <div id="image-box1" style="width: 500px; height: 300px; display: none;">
                                    </div>
                                    <div>

                                        <button class="btn btn-primary" type="button"
                                            style="display: none; margin-left: 20px;" id="crop-btn1">Crop</button>
                                    </div>

                                </div>

                                {{#if banner}}
                                <h1 id="hiprvew" style="display: block;" class="text-center mb-2">Banner Priview</h1>
                                {{!-- --}}
                                <div style="width: 100%; justify-content: center; display: flex;">

                                    <div>

                                        <img style="border:solid 25px rgb(203, 203, 203);" width="650px" height="250px"
                                            src="/ELECTRA BANNER/{{banner.[0]._id}}11.jpg" id="imgview1">
                                    </div>

                                </div>
                                {{else}}
                                <h1 id="hiprvew" style="display: block;" class="text-center mb-2">Banner Priview</h1>
                                {{!-- --}}
                                <div style="width: 100%; justify-content: center; display: flex;">

                                    <div>

                                        <img style="border:solid 25px rgb(203, 203, 203); display: none;" width="650px"
                                            height="250px" src="" id="imgview1">
                                    </div>

                                </div>
                                {{/if}}
                            </div>



                        </div>

                        {{!-- end prv --}}






                        <div class="col-sm-6 form-field m-3">
                            <div class="btns justify-content-end">

                                <button style="display: none;" type="submit" class="btn bg-green" id="confirm-btn1">Save </button>
                                {{!-- <a href="/admin/banner-mngt" type="reset" class="btn btn-border-gray">Cancel</a> --}}

                            </div>


                        </div>






                        {{!-- croper end --}}




                    </form>
                </div>

            </div>




            {{!-- banner show --}}
            <div class="container">

                <table class="table table-bordered table-hover mb-0">
                    <thead>
                        <tr class="row">
                            <th class="col-4">BANNER PREVIEW</th>
                            <th class="col-3">BANNER TITIL</th>
                            <th class="col-3">BANNER TEXT</th>
                            <th class="col-2">ACTION</th>


                        </tr>
                    </thead>
                    <tbody>
                        {{#each banner}}
                        <tr class="row">
                            {{!-- style="margin-left: 100px;" --}}

                            <td class="col-4"><img width="300"
                                    style="margin-left: 30px; border:solid 15px rgb(203, 203, 203);"
                                    src="/ELECTRA BANNER/{{this._id}}11.jpg" alt="">
                            </td>
                            <td class="col-3  d-flex align-items-center justify-content-center text-uppercase">
                                {{this.BannerText}}</td>
                            <td class="col-3  d-flex align-items-center justify-content-center text-uppercase">
                                {{this.BannerHedding}}</td>

                            <td class="col-2  d-flex align-items-center justify-content-center text-uppercase">




                                <a onclick="confirmAlert('{{this._id}}')" style="background-color: whitesmoke;"
                                    ><i style="font-size: 25px;"
                                        class="text-danger fa fa-trash" aria-hidden="true"></i></a>

                            </td>





                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>




            {{!-- end --}}



            <footer class="text-center mb-4">© 2018 Dashto by kri8thm.com</footer>
        </main>





    </div>

    <aside id="right-sidebar"></aside>
    </div>
    <script src="/assets/js/vendor.js"></script>
    <script src="/assets/js/base/init.switcher.js"></script>
    <script src="/assets/js/base/custom.js"></script>




    <script>

        //Cropper js function

        function fileValidation1() {

            const imagebox = document.getElementById('image-box1')
            const crop_btn = document.getElementById('crop-btn1')
            var fileInput = document.getElementById('file-upload');

            var filePath = fileInput.value;
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (!allowedExtensions.exec(filePath)) {
                fileInput.value = '';
                swal({
                    title: "Ther is a problem!",
                    text: "This File is not support , Please add an image file !",
                    icon: "warning",
                });
                return false;
            } else {
                //Image preview
                const img_data = fileInput.files[0]
                const url = URL.createObjectURL(img_data)
                imagebox.innerHTML = `<img src="${url}" id="image" style="width:100%">`
                const image = document.getElementById('image')
                document.getElementById('image-box1').style.display = 'block'
                document.getElementById('crop-btn1').style.display = 'block'
                document.getElementById('confirm-btn1').style.display = 'none'
                document.getElementById('imgview1').style.display = 'none'

                const cropper = new Cropper(image, {
                    autoCropArea: 1,
                    viewMode: 1,
                    scalable: false,
                    zoomable: false,
                    movable: false,
                    aspectRatio: 30 / 10,
                    //preview: '.preview',
                    minCropBoxWidth: 180,
                    minCropBoxHeight: 240,
                })
                crop_btn.addEventListener('click', () => {
                    cropper.getCroppedCanvas().toBlob((blob) => {
                        let fileInputElement = document.getElementById('file-upload');
                        let file = new File([blob], img_data.name, { type: "image/*", lastModified: new Date().getTime() });
                        let container = new DataTransfer();

                        container.items.add(file);
                        const img = container.files[0]
                        var url = URL.createObjectURL(img)
                        fileInputElement.files = container.files;
                        document.getElementById('imgview1').src = url



                        document.getElementById('imgview1').style.display = 'block'
                        document.getElementById('image-box1').style.display = 'none'
                        document.getElementById('crop-btn1').style.display = 'none'
                        document.getElementById('confirm-btn1').style.display = 'block'
                    }, 'image/webp', 0.5);
                });
            }
        }


    </script>




    {{!-- form validation --}}
    <script>
        function validationaddressplace() {
            var hedding = document.getElementById("inputhedding").value;
            var bannerText = document.getElementById("bannerText").value;



            var image1 = document.getElementById("file-upload").value

            var Err
            if (hedding == "") {
                document.getElementById("heddingErr").innerHTML = "Enter Banner Title";
                Err = true
            } else {
                console.log('ok')
            }
            if (bannerText == "") {
                document.getElementById("bannTxt").innerHTML = "Enter Banner Text";
                Err = true
            } else {
                console.log('ok')
            }
            if (image1 == "") {
                document.getElementById("bannerImage").innerHTML = "Please Upload Banner";
                Err = true
            } else {
                console.log('ok')
            }


            if (Err) {
                return false
            }

        }
    </script>

    <script>
        function confirmAlert(bannerId) {
          
          
            Swal.fire({
                title: 'Are you sure?',
                text: "Do you want to delete this banner ?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes'
            }).then(async (result) => {
                   console.log(result)
               if (result.isConfirmed) {

           await fetch("/admin/deleteBanner", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({

                 
                    id: bannerId


                })
            })

            location.reload();
        }

        else {
            return false;
        }
            })

            if(ok===0){
                return false
            }else{
                return true
            }
        }


        
    </script>
    <script>

        function clear() {
            document.getElementsByClassName("add-prod").reset();
        }
    </script>


    <script src=" https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.11/cropper.js"></script>


    {{!-- seat alert CDN --}}
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script>
  

</body>

</html>